{"ast":null,"code":"/**\n * A class representing a timeout that triggers a callback function after a specified time interval.\n */\nexport class Timeout {\n  /**\n   * Constructs a new Timeout instance with the given timeout duration and callback function.\n   *\n   * @param timeoutMil - The timeout duration in milliseconds.\n   * @param callback - The function to be called when the timeout is triggered.\n   */\n  constructor(timeoutMil, callback) {\n    this.clear = this.clear.bind(this);\n    const that = this;\n    this.isCleared = false;\n    this.isCalled = false;\n    this.timeoutHook = setTimeout(() => {\n      if (!that.isCleared) {\n        this.isCalled = true;\n        callback();\n      }\n    }, timeoutMil);\n  }\n  isCleared;\n  isCalled;\n  timeoutHook;\n  /**\n   * Clears the timeout so that the callback function is not called.\n   */\n  clear() {\n    if (!this.isCleared) {\n      clearTimeout(this.timeoutHook);\n      this.isCleared = true;\n    }\n  }\n}\n/**\n * A class representing an interval that triggers a callback function repeatedly\n * at a specified time interval.\n */\nexport class Interval {\n  /**\n   * Constructs a new Interval instance with the given interval duration and callback function.\n   *\n   * @param timeoutMil - The interval duration in milliseconds.\n   * @param callback - The function to be called when the interval is triggered.\n   */\n  constructor(timeoutMil, callback) {\n    this.clear = this.clear.bind(this);\n    const that = this;\n    this.isCleared = false;\n    this.isCalled = false;\n    this.intervalHook = setInterval(() => {\n      if (!that.isCleared) {\n        this.isCalled = true;\n        callback();\n      }\n    }, timeoutMil);\n  }\n  isCleared;\n  isCalled;\n  intervalHook;\n  /**\n   * Clears the interval so that the callback function is not called anymore.\n   */\n  clear() {\n    if (!this.isCleared) {\n      clearInterval(this.intervalHook);\n      this.isCleared = true;\n    }\n  }\n}\n/**\n * Returns a promise that resolves after the specified time interval.\n *\n * @param timeMilli - The time interval in milliseconds.\n *\n * @returns A promise that resolves after the specified time interval.\n */\nexport const wait = async timeMilli => {\n  return new Promise(resolve => {\n    const timeout = new Timeout(timeMilli, () => {\n      timeout.clear();\n      return resolve();\n    });\n  });\n};\n/**\n * Returns a promise that resolves after the specified time interval and throws an error if the\n * specified promise does not resolve before the timeout interval.\n *\n * @param promise - The promise to be resolved.\n * @param timeoutMs - The time interval in milliseconds.\n *\n * @throws if the specified promise does not resolve before the timeout interval.\n *\n * @returns A promise that resolves after the specified time interval.\n */\nexport async function withTimeoutRejection(promise, timeoutMs) {\n  const sleep = new Promise((resolve, reject) => setTimeout(() => reject(new Error(`Timeout of ${timeoutMs} has passed and promise did not resolve`)), timeoutMs));\n  return Promise.race([promise, sleep]);\n}","map":{"version":3,"names":["Timeout","constructor","timeoutMil","callback","clear","bind","that","isCleared","isCalled","timeoutHook","setTimeout","clearTimeout","Interval","intervalHook","setInterval","clearInterval","wait","timeMilli","Promise","resolve","timeout","withTimeoutRejection","promise","timeoutMs","sleep","reject","Error","race"],"sources":["../../../src/utils/time.ts"],"sourcesContent":[null],"mappings":"AAAA;;;AAGA,OAAM,MAAOA,OAAO;EAClB;;;;;;EAMAC,YAAYC,UAAkB,EAAEC,QAAoB;IAClD,IAAI,CAACC,KAAK,GAAG,IAAI,CAACA,KAAK,CAACC,IAAI,CAAC,IAAI,CAAC;IAElC,MAAMC,IAAI,GAAG,IAAI;IACjB,IAAI,CAACC,SAAS,GAAG,KAAK;IACtB,IAAI,CAACC,QAAQ,GAAG,KAAK;IACrB,IAAI,CAACC,WAAW,GAAGC,UAAU,CAAC,MAAK;MACjC,IAAI,CAACJ,IAAI,CAACC,SAAS,EAAE;QACnB,IAAI,CAACC,QAAQ,GAAG,IAAI;QACpBL,QAAQ,EAAE;;IAEd,CAAC,EAAED,UAAU,CAAC;EAChB;EACQK,SAAS;EACTC,QAAQ;EACRC,WAAW;EAEnB;;;EAGOL,KAAKA,CAAA;IACV,IAAI,CAAC,IAAI,CAACG,SAAS,EAAE;MACnBI,YAAY,CAAC,IAAI,CAACF,WAAW,CAAC;MAC9B,IAAI,CAACF,SAAS,GAAG,IAAI;;EAEzB;;AAGF;;;;AAIA,OAAM,MAAOK,QAAQ;EACnB;;;;;;EAMAX,YAAYC,UAAkB,EAAEC,QAAoB;IAClD,IAAI,CAACC,KAAK,GAAG,IAAI,CAACA,KAAK,CAACC,IAAI,CAAC,IAAI,CAAC;IAElC,MAAMC,IAAI,GAAG,IAAI;IACjB,IAAI,CAACC,SAAS,GAAG,KAAK;IACtB,IAAI,CAACC,QAAQ,GAAG,KAAK;IACrB,IAAI,CAACK,YAAY,GAAGC,WAAW,CAAC,MAAK;MACnC,IAAI,CAACR,IAAI,CAACC,SAAS,EAAE;QACnB,IAAI,CAACC,QAAQ,GAAG,IAAI;QACpBL,QAAQ,EAAE;;IAEd,CAAC,EAAED,UAAU,CAAC;EAChB;EACQK,SAAS;EACTC,QAAQ;EACRK,YAAY;EAEpB;;;EAGOT,KAAKA,CAAA;IACV,IAAI,CAAC,IAAI,CAACG,SAAS,EAAE;MACnBQ,aAAa,CAAC,IAAI,CAACF,YAAY,CAAC;MAChC,IAAI,CAACN,SAAS,GAAG,IAAI;;EAEzB;;AAGF;;;;;;;AAOA,OAAO,MAAMS,IAAI,GAAG,MAAOC,SAAiB,IAAmB;EAC7D,OAAO,IAAIC,OAAO,CAAQC,OAAO,IAAI;IACnC,MAAMC,OAAO,GAAG,IAAIpB,OAAO,CAACiB,SAAS,EAAE,MAAK;MAC1CG,OAAO,CAAChB,KAAK,EAAE;MACf,OAAOe,OAAO,EAAE;IAClB,CAAC,CAAC;EACJ,CAAC,CAAC;AACJ,CAAC;AAED;;;;;;;;;;;AAWA,OAAO,eAAeE,oBAAoBA,CACxCC,OAAmB,EACnBC,SAAiB;EAEjB,MAAMC,KAAK,GAAG,IAAIN,OAAO,CAAC,CAACC,OAAO,EAAEM,MAAM,KACxCf,UAAU,CACR,MACEe,MAAM,CACJ,IAAIC,KAAK,CACP,cAAcH,SAAS,yCAAyC,CACjE,CACF,EACHA,SAAS,CACV,CACF;EACD,OAAOL,OAAO,CAACS,IAAI,CAAC,CAACL,OAAO,EAAEE,KAAK,CAAC,CAAe;AACrD"},"metadata":{},"sourceType":"module","externalDependencies":[]}