{"ast":null,"code":"var _jsxFileName = \"/Users/jwmdev/Development/github/massa/massa-sc-examples/age/react/src/App.tsx\",\n  _s = $RefreshSig$();\nimport \"./App.css\";\nimport \"@massalabs/react-ui-kit/src/global.css\";\nimport { useEffect, useState } from \"react\";\nimport { providers } from \"@massalabs/wallet-provider\";\nimport { ClientFactory, bytesToU32, Args } from \"@massalabs/massa-web3\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CONTRACT_ADDRESS = \"AS1QMH89c9LanxsrDzAEBEMuc8D3vx1ZtTtn8NqdK1eZn7bNRVA8\";\nfunction App() {\n  _s();\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [client, setClient] = useState(null);\n  const [account, setAccount] = useState(null);\n  const [lastOpId, setlastOpId] = useState(null);\n  const [inputAge, setInputAge] = useState(0);\n  const [inputName, setInputName] = useState(\"\");\n  const [ageResult, setAgeResult] = useState(null);\n  useEffect(() => {\n    const registerAndSetProvider = async () => {\n      try {\n        let provider = (await providers(true, 10000))[0];\n        let accounts = await provider.accounts();\n        if (accounts.length === 0) {\n          setErrorMessage(\"No accounts found\");\n          return;\n        }\n        setAccount(accounts[0]);\n        if (!account || !provider) {\n          return;\n        }\n        setClient(await ClientFactory.fromWalletProvider(provider, account));\n      } catch (e) {\n        console.log(e);\n        setErrorMessage(\"Please install MassaStation and the plugin Massa Wallet in it and refresh.\");\n      }\n    };\n    registerAndSetProvider();\n  }, [account]);\n\n  // argument is a u32 that will be passed to the smart contract\n  const callChangeAge = newAge => async () => {\n    try {\n      if (!account || !client) {\n        return;\n      }\n      let args = new Args().addString(inputName).addU32(newAge);\n      let opId = await client.smartContracts().callSmartContract({\n        targetAddress: CONTRACT_ADDRESS,\n        functionName: \"changeAge\",\n        parameter: args.serialize(),\n        maxGas: BigInt(1000000),\n        coins: BigInt(0),\n        fee: BigInt(0)\n      });\n      setlastOpId(opId);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n  const callGetAge = async () => {\n    try {\n      if (!account || !client) {\n        return;\n      }\n      let res = await client.smartContracts().readSmartContract({\n        maxGas: BigInt(1000000),\n        targetAddress: CONTRACT_ADDRESS,\n        targetFunction: \"getAge\",\n        parameter: new Args().addString(inputName).serialize()\n      });\n      setAgeResult(bytesToU32(res.returnValue));\n    } catch (error) {\n      console.error(error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bodyContent\",\n    children: [errorMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: errorMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 24\n    }, this), account && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"wrapper\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"messageToDisplay\",\n        children: \"Age Example: React\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"Your address: \", account.address()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"innerWrapper\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: inputName,\n            placeholder: \"name\",\n            onChange: e => {\n              setInputName(e.target.value);\n              setAgeResult(null);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            placeholder: \"age\",\n            value: inputAge,\n            onChange: e => setInputAge(parseInt(e.target.value))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: callChangeAge(inputAge),\n            children: [\"Change age of \", inputName === \"\" ? \"...\" : inputName]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 13\n        }, this), lastOpId && /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: [\"Last Op id: \", lastOpId]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 26\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"innerWrapper\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: callGetAge,\n            children: [\"Get age of \", inputName === \"\" ? \"...\" : inputName]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 15\n          }, this), ageResult !== null ? /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"Age of \", inputName, \" is \", ageResult]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 38\n          }, this) : null]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"75MRtAnpgEhof487DIze4pFAiYM=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useEffect","useState","providers","ClientFactory","bytesToU32","Args","jsxDEV","_jsxDEV","CONTRACT_ADDRESS","App","_s","errorMessage","setErrorMessage","client","setClient","account","setAccount","lastOpId","setlastOpId","inputAge","setInputAge","inputName","setInputName","ageResult","setAgeResult","registerAndSetProvider","provider","accounts","length","fromWalletProvider","e","console","log","callChangeAge","newAge","args","addString","addU32","opId","smartContracts","callSmartContract","targetAddress","functionName","parameter","serialize","maxGas","BigInt","coins","fee","error","callGetAge","res","readSmartContract","targetFunction","returnValue","className","children","fileName","_jsxFileName","lineNumber","columnNumber","address","type","value","placeholder","onChange","target","parseInt","onClick","_c","$RefreshReg$"],"sources":["/Users/jwmdev/Development/github/massa/massa-sc-examples/age/react/src/App.tsx"],"sourcesContent":["import \"./App.css\";\nimport \"@massalabs/react-ui-kit/src/global.css\";\nimport { useEffect, useState } from \"react\";\nimport { IAccount, providers } from \"@massalabs/wallet-provider\"\nimport { ClientFactory, bytesToU32, Args, Client } from \"@massalabs/massa-web3\";\n\nconst CONTRACT_ADDRESS = \"AS1QMH89c9LanxsrDzAEBEMuc8D3vx1ZtTtn8NqdK1eZn7bNRVA8\";\n\nfunction App() {\n  const [errorMessage, setErrorMessage] = useState<any>(\"\");\n  const [client, setClient] = useState<Client | null>(null);\n  const [account, setAccount] = useState<IAccount | null>(null);\n  const [lastOpId, setlastOpId] = useState<string | null>(null);\n  const [inputAge, setInputAge] = useState<number>(0);\n  const [inputName, setInputName] = useState<string>(\"\");\n  const [ageResult, setAgeResult] = useState<number | null>(null);\n\n  useEffect(() => {\n    const registerAndSetProvider = async () => {\n      try {\n        let provider = (await providers(true, 10000))[0];\n        let accounts = await provider.accounts();\n        if (accounts.length === 0) {\n          setErrorMessage(\"No accounts found\");\n          return;\n        }\n        setAccount(accounts[0]);\n        if (!account || !provider) {\n          return;\n        }\n        setClient(await ClientFactory.fromWalletProvider(provider, account));\n      } catch (e) {\n        console.log(e);\n        setErrorMessage(\"Please install MassaStation and the plugin Massa Wallet in it and refresh.\");\n      }\n    };\n\n    registerAndSetProvider();\n  }, [account]);\n\n  // argument is a u32 that will be passed to the smart contract\n  const callChangeAge = (newAge: number) => async () => {\n    try {\n      if (!account || !client) {\n        return;\n      }\n      let args = new Args().addString(inputName).addU32(newAge);\n      \n      let opId = await client.smartContracts().callSmartContract({\n        targetAddress: CONTRACT_ADDRESS,\n        functionName: \"changeAge\",\n        parameter: args.serialize(),\n        maxGas: BigInt(1000000),\n        coins: BigInt(0),\n        fee: BigInt(0),\n      });\n      setlastOpId(opId);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const callGetAge = async () => {\n    try {\n      if (!account || !client) {\n        return;\n      }\n      let res = await client.smartContracts().readSmartContract({\n        maxGas: BigInt(1000000),\n        targetAddress: CONTRACT_ADDRESS,\n        targetFunction: \"getAge\",\n        parameter: new Args().addString(inputName).serialize(),\n      });\n\n      setAgeResult(bytesToU32(res.returnValue));\n    } catch (error) {\n      console.error(error);\n    }\n  }\n  return (\n    <div className=\"bodyContent\">\n      {errorMessage && <div>{errorMessage}</div>}\n      {account && (\n        <div className=\"wrapper\">\n          <h1 className=\"messageToDisplay\">Age Example: React</h1>\n          <div>\n            <h3>Your address: {account.address()}</h3>\n            <div className=\"innerWrapper\">\n              <input type=\"text\" value={inputName} placeholder=\"name\" onChange={(e) => {\n                setInputName(e.target.value);\n                setAgeResult(null);\n              }} />\n              <input\n                type=\"number\"\n                placeholder=\"age\"\n                value={inputAge}\n                onChange={(e) => setInputAge(parseInt(e.target.value))}\n              />\n              <button onClick={callChangeAge(inputAge)}>\n                Change age of {\n                  inputName === \"\" ? \"...\" : inputName}\n              </button>\n            </div>\n            {lastOpId && <h4>Last Op id: {lastOpId}</h4>}\n            <div className=\"innerWrapper\">\n              <button onClick={callGetAge}>\n                Get age of {\n                  inputName === \"\" ? \"...\" : inputName}\n              </button>\n              {\n                ageResult !== null ? <div>Age of {inputName} is {ageResult}</div> : null\n              }\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}